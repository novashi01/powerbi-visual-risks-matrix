# v1.3.0 Architecture - CORRECT EXPLANATION

## ⚠️ CLARIFICATION: Two Separate Concepts

There are **TWO DIFFERENT** grid systems - this is the key understanding:

### 1. **Matrix Grid** (Likelihood × Consequence Matrix)
**Purpose:** The main risk assessment matrix structure  
**Controls:** Overall matrix dimensions  
**Settings:**
- Matrix Rows: 2-10 (default: 5 for 5×5 matrix)
- Matrix Columns: 2-10 (default: 5 for 5×5 matrix)
- Enable Scrolling: true/false

**Example:**
```
3×3 Matrix Grid:
┌────────┬────────┬────────┐
│ Low L  │ Med L  │ High L │  ← Likelihood levels
│ High C │        │        │
├────────┼────────┼────────┤
│        │        │        │  ← Consequence levels
│ Med C  │        │        │
├────────┼────────┼────────┤
│        │        │        │
│ Low C  │        │        │
└────────┴────────┴────────┘

5×5 Matrix Grid (traditional):
┌────┬────┬────┬────┬────┐
│    │    │    │    │    │  ← 5 likelihood levels
├────┼────┼────┼────┼────┤
│    │    │    │    │    │
├────┼────┼────┼────┼────┤
│    │    │    │    │    │  ← 5 consequence levels
├────┼────┼────┼────┼────┤
│    │    │    │    │    │
├────┼────┼────┼────┼────┤
│    │    │    │    │    │
└────┴────┴────┴────┴────┘
```

---

### 2. **Marker Grid** (Risk IDs within Each Cell)
**Purpose:** How to arrange multiple risk markers INSIDE each cell  
**Controls:** Marker positioning within a single matrix cell  
**Only applies when:** Positioning Mode = "Organized Grid"  
**Settings:**
- Marker Rows (per cell): 1-10 (default: 3)
- Marker Columns (per cell): 1-10 (default: 3)
- Cell Padding: 0-20px
- Show Inherent in Organized: true/false
- Organized Arrows: true/false

**Example:**
```
Single Matrix Cell with 3×3 Marker Grid:
┌─────────────────────────────┐
│  Risk-001  Risk-002  Risk-003│  ← Row 1 (3 risks)
│     ●          ●          ●  │
│                              │
│  Risk-004  Risk-005  Risk-006│  ← Row 2 (3 risks)
│     ●          ●          ●  │
│                              │
│  Risk-007  Risk-008  Risk-009│  ← Row 3 (3 risks)
│     ●          ●          ●  │
└─────────────────────────────┘
Maximum capacity: 3×3 = 9 risks per cell
```

---

## 🎯 Complete Example: 3×3 Matrix with 3×3 Markers

### Matrix Grid: 3 rows × 3 columns = 9 cells total
### Marker Grid: 3 rows × 3 columns = 9 risks per cell max

```
FULL RISK MATRIX VISUALIZATION:

     Low L       Medium L     High L
   ┌─────────┬─────────┬─────────┐
H  │         │  R-045  │  R-098  │  High
i  │         │    ●    │  R-101  │  Consequence
g  │         │         │  ● ●    │
h  ├─────────┼─────────┼─────────┤
   │  R-023  │  R-067  │  R-112  │  Medium
C  │    ●    │  R-078  │  R-119  │  Consequence
   │         │  ● ●    │  R-123  │
   │         │         │  ● ● ●  │
   ├─────────┼─────────┼─────────┤
L  │  R-001  │  R-034  │  R-089  │  Low
o  │  R-005  │  R-038  │         │  Consequence
w  │  ● ●    │  ● ●    │    ●    │
   └─────────┴─────────┴─────────┘

Legend:
- 9 total cells (3×3 matrix grid)
- Each cell can hold up to 9 risks (3×3 marker grid)
- Risks organized in neat rows/columns within each cell
```

---

## 📊 Configuration Hierarchy

```
v1.3.0 Settings Structure:
│
├── Matrix Grid Panel
│   ├── Matrix Rows: 2-10 (controls overall matrix size)
│   ├── Matrix Columns: 2-10 (controls overall matrix size)
│   └── Enable Scrolling: true/false
│
└── Risk Markers Layout Panel
    ├── Positioning Mode: 
    │   ├── "Organized Grid" ← Uses marker grid settings
    │   ├── "Random Scatter" ← Legacy jittered
    │   └── "Centered" ← Single centered position
    │
    └── Organized Grid Settings (only when mode = Organized):
        ├── Marker Rows: 1-10 (risks per cell vertically)
        ├── Marker Columns: 1-10 (risks per cell horizontally)
        ├── Cell Padding: 0-20px
        ├── Show Inherent in Organized: true/false
        └── Organized Arrows: true/false
```

---

## 💡 Key Understanding

### ❌ WRONG Understanding:
"Matrix rows/columns controls how many risk IDs are in the grid"

### ✅ CORRECT Understanding:
**Matrix Rows/Columns** = Size of the risk assessment matrix (Likelihood × Consequence)
- 3×3 = 9 total cells for risk categorization
- 5×5 = 25 total cells for risk categorization (traditional)
- 10×10 = 100 total cells for detailed assessment

**Marker Rows/Columns** = How many risks fit in EACH cell when using organized mode
- 3×3 = up to 9 risks organized per cell
- 5×5 = up to 25 risks organized per cell
- 2×2 = up to 4 risks organized per cell

---

## 🎨 Visual Examples

### Example 1: Small Portfolio
**Matrix Grid:** 3×3 (9 cells)  
**Marker Grid:** 2×2 (4 risks per cell)  
**Total Capacity:** 9 cells × 4 markers = 36 risks

```
┌──────┬──────┬──────┐
│ ● ●  │      │  ●   │  ← Each cell can hold
│ ● ●  │  ●   │  ●   │     2×2 = 4 risks
├──────┼──────┼──────┤
│  ●   │ ● ●  │ ● ●  │
│      │ ● ●  │ ●    │
├──────┼──────┼──────┤
│ ● ●  │  ●   │      │
│ ●    │      │      │
└──────┴──────┴──────┘
```

### Example 2: Standard Portfolio  
**Matrix Grid:** 5×5 (25 cells)  
**Marker Grid:** 3×3 (9 risks per cell)  
**Total Capacity:** 25 cells × 9 markers = 225 risks

```
┌────┬────┬────┬────┬────┐
│ ●●●│    │  ● │ ●● │ ●●●│  ← Traditional 5×5 matrix
│ ●●●│ ●● │  ● │ ●● │ ●●●│     with organized markers
│ ●●●│ ●● │    │    │ ●● │
├────┼────┼────┼────┼────┤
│    │ ●●●│ ●●●│ ●● │ ●  │
│  ● │ ●●●│ ●● │ ●  │    │
│    │ ●● │ ●  │    │    │
├────┼────┼────┼────┼────┤
│ ●● │ ●●●│ ●●●│ ●●●│ ●● │
│ ●● │ ●●●│ ●●●│ ●●●│ ●  │
│ ●  │ ●●●│ ●●●│ ●●●│    │
├────┼────┼────┼────┼────┤
│ ●  │ ●● │ ●●●│ ●●●│ ●●●│
│    │ ●  │ ●●●│ ●●●│ ●●●│
│    │    │ ●  │ ●● │ ●  │
├────┼────┼────┼────┼────┤
│    │  ● │ ●● │ ●● │ ●●●│
│    │    │ ●  │ ●  │ ●●●│
│    │    │    │    │ ●  │
└────┴────┴────┴────┴────┘
```

### Example 3: Large Enterprise Portfolio
**Matrix Grid:** 10×10 (100 cells)  
**Marker Grid:** 5×5 (25 risks per cell)  
**Total Capacity:** 100 cells × 25 markers = 2,500 risks  
**Scrolling:** REQUIRED (enabled by default)

---

## 🎯 Default Configuration (v1.3.0)

```javascript
Default Settings:
{
  matrixGrid: {
    matrixRows: 3,        // 3×3 matrix (9 cells)
    matrixColumns: 3,
    enableScrolling: true
  },
  riskMarkersLayout: {
    positioningMode: "organized",
    markerRows: 3,        // 3×3 markers per cell (9 risks max)
    markerColumns: 3,
    cellPadding: 5,
    showInherentInOrganized: true,
    organizedArrows: true
  }
}
```

**Result:** 3×3 matrix with up to 9 organized risks per cell

---

## ❓ Common Questions

**Q: What if I have more than 9 risks in one cell with 3×3 marker grid?**  
A: Only the first 9 risks are displayed in that cell. Consider:
- Increasing marker grid to 4×4 (16 risks) or 5×5 (25 risks)
- Or using "Random Scatter" mode which can show more (with overlap)

**Q: Can I use 10×10 matrix grid with 2×2 marker grid?**  
A: Yes! That gives you 100 cells with 4 organized risks each = 400 total capacity

**Q: What's the difference between v1.2.0 and v1.3.0?**  
A: v1.2.0 has fixed 5×5 matrix. v1.3.0 allows any matrix size (2×2 to 10×10) AND organizes markers within each cell.

---

## 📝 Summary

**Two Independent Grid Systems:**

1. **Matrix Grid** (Main Structure)
   - Controls the risk assessment matrix size
   - Default: 3×3 (was 5×5 in v1.2.0)
   - Range: 2×2 to 10×10

2. **Marker Grid** (Per-Cell Organization)  
   - Controls how risks arrange INSIDE each cell
   - Default: 3×3 per cell
   - Range: 1×1 to 10×10 per cell
   - Only active in "Organized Grid" positioning mode

**The Innovation:**
v1.3.0 adds flexibility at BOTH levels - you can configure the overall matrix structure AND how markers organize within each cell.

This is what makes v1.3.0 significantly more powerful than v1.2.0's fixed 5×5 structure.